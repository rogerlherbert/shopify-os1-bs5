{% assign col_max_width = section.settings.card_width_rems %}

<h2 class="text-center mb-3">{{ section.settings.header }}</h2>

<div class="overflow-scroll">
  <div class="mx-auto" style="width: {{ col_max_width | times: section.blocks.size }}rem;">
    <div class="mx-2">
      <div class="row justify-content-center">

        {% for block in section.blocks %}
        <div class="col" style="width: {{ col_max_width }}rem;" {{ block.shopify_attributes }}>
          <div class="card h-100">
            <img class="img-fluid card-img-top" loading="lazy" width="{{ block.settings.image.width }}" height="{{ block.settings.image.height }}" src="{{ block.settings.image | img_url: '414x414', scale: 2, crop: 'center' }}" alt="{{ block.settings.image.alt }}">
            <div class="card-body">
              <h5 class="card-title">{{ block.settings.headline }}</h5>
              <p class="card-text">{{ block.settings.description }}</p>
              {% if block.settings.cta_url != blank %}<a href="{{ block.settings.cta_url }}" class="btn btn-primary">{{ block.settings.cta_label }}</a>{% endif %}
            </div>
          </div>
        </div>
        {% endfor %}

      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Card Carousel",
  "class": "card-carousel",
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "id": "headline",
          "type": "text",
          "label": "Headline"
        },
        {
          "id": "description",
          "type": "text",
          "label": "Description"
        },
        {
          "id": "image",
          "type": "image_picker",
          "label": "Image"
        },
        {
          "id": "cta_label",
          "type": "text",
          "label": "Button Label",
          "default": "Learn more"
        },
        {
          "id": "cta_url",
          "type": "url",
          "label": "Button Link"
        }
      ]
    }
  ],
  "settings": [
    {
      "id": "header",
      "type": "text",
      "label": "Header",
      "default": "Cards"
    },
    {
      "id": "card_width_rems",
      "type": "number",
      "label": "Card width in rems",
      "default": 21
    }
  ],
  "presets": [
    {
      "name": "Card Carousel",
      "category": "Repeatable Blocks"
    }
  ]
}
{% endschema %}